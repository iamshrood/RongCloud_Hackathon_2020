(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["common/main"],{"1b54":function(e,t,n){"use strict";var o=n("e4a7"),r=n.n(o);r.a},"54e4":function(e,t,n){"use strict";n.r(t);var o=n("7689");for(var r in o)"default"!==r&&function(e){n.d(t,e,(function(){return o[e]}))}(r);n("1b54");var a,s,l,g,i=n("f0c5"),c=Object(i["a"])(o["default"],a,s,!1,null,null,null,!1,l,g);t["default"]=c.exports},7689:function(e,t,n){"use strict";n.r(t);var o=n("fd85"),r=n.n(o);for(var a in o)"default"!==a&&function(e){n.d(t,e,(function(){return o[e]}))}(a);t["default"]=r.a},c352:function(e,t,n){"use strict";(function(e,t){n("7b0f");var o=s(n("66fd")),r=s(n("54e4")),a=s(n("a445"));function s(e){return e&&e.__esModule?e:{default:e}}function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function g(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){i(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var c=n("e03f");o.default.config.productionTip=!1,r.default.mpType="app",o.default.prototype.$store=a.default,o.default.prototype.$rongyun=function(){var t=this,n="p5tvi9dspqrx4";c.RongIMClient.init(n),c.RongIMClient.setConnectionStatusListener({onChanged:function(t){switch(t){case c.ConnectionStatus.CONNECTED:console.log("链接成功");break;case c.ConnectionStatus.CONNECTING:console.log("正在链接");break;case c.ConnectionStatus.DISCONNECTED:console.log("断开连接");break;case c.ConnectionStatus.KICKED_OFFLINE_BY_OTHER_CLIENT:console.log("其他设备登录, 本端被踢"),e.clearStorageSync(),e.navigateTo({url:"../login/login"});break;case c.ConnectionStatus.DOMAIN_INCORRECT:console.log("域名不正确, 请至开发者后台查看安全域名配置");break;case c.ConnectionStatus.NETWORK_UNAVAILABLE:console.log("网络不可用, 此时可调用 reconnect 进行重连");break;default:console.log("链接状态为",t);break}}});var o=function(){var e=new Date,t=e.getMonth()+1,n=e.getDate(),o=e.getHours()<10?"0"+e.getHours():e.getHours(),r=e.getMinutes()<10?"0"+e.getMinutes():e.getMinutes();t>=1&&t<=9&&(t="0"+t),n>=0&&n<=9&&(n="0"+n);var a=t+"-"+n+" "+o+":"+r;return a},r=[[{url:"0.png",alt:"[微笑]"},{url:"1.png",alt:"[伤心]"},{url:"2.png",alt:"[高兴]"},{url:"3.png",alt:"[有些不爽]"},{url:"4.png",alt:"[不舒服]"},{url:"5.png",alt:"[亲亲]"},{url:"6.png",alt:"[生气]"},{url:"7.png",alt:"[流泪]"},{url:"8.png",alt:"[无语]"},{url:"9.png",alt:"[吐舌笑]"},{url:"10.png",alt:"[惊吓]"},{url:"11.png",alt:"[流汗]"},{url:"12.png",alt:"[小声]"},{url:"13.png",alt:"[气的冒烟]"},{url:"14.png",alt:"[戴口罩]"},{url:"15.png",alt:"[疑问]"},{url:"16.png",alt:"[紧张]"},{url:"17.png",alt:"[呕吐]"},{url:"18.png",alt:"[面无表情]"},{url:"19.png",alt:"[祝贺]"},{url:"20.png",alt:"[泪眼]"},{url:"21.png",alt:"[白眼]"},{url:"22.png",alt:"[鬼脸]"},{url:"23.png",alt:"[哭笑不得]"}],[{url:"24.png",alt:"[发烧]"},{url:"25.png",alt:"[惊讶]"},{url:"26.png",alt:"[冻僵]"},{url:"27.png",alt:"[汗]"},{url:"28.png",alt:"[高兴]"},{url:"29.png",alt:"[眼冒金星]"},{url:"30.png",alt:"[嘟嘴]"},{url:"31.png",alt:"[大哭]"},{url:"32.png",alt:"[说谎]"},{url:"33.png",alt:"[想吐]"},{url:"34.png",alt:"[难过]"},{url:"35.png",alt:"[臭臭]"},{url:"36.png",alt:"[笑的流泪]"},{url:"37.png",alt:"[怒骂]"},{url:"38.png",alt:"[睡觉]"},{url:"39.png",alt:"[天使]"},{url:"40.png",alt:"[心动]"},{url:"41.png",alt:"[恶魔]"},{url:"42.png",alt:"[尴尬]"},{url:"43.png",alt:"[挤眼笑]"},{url:"44.png",alt:"[温馨]"},{url:"45.png",alt:"[说漏嘴]"},{url:"46.png",alt:"[酷]"},{url:"47.png",alt:"[拽]"}],[{url:"48.png",alt:"[思考]"},{url:"49.png",alt:"[不爽]"},{url:"50.png",alt:"[气的颠倒]"},{url:"51.png",alt:"[丧气]"},{url:"52.png",alt:"[wink]"},{url:"53.png",alt:"[哈欠]"},{url:"54.png",alt:"[噤声]"}]],a=function(e){var t=e.replace(/\[([^(\]|\[)]*)\]/g,(function(e,t){for(var n=0;n<r.length;n++)for(var o=r[n],a=0;a<o.length;a++){var s=o[a];if(s.alt==e){var l="https://www.liebe.pub/static/emoji/",g='<img src="'+l+s.url+'" width="25upx" height="25upx" style="max-width:100%;">';return g}}}));return'<div style="vertical-align:middle;display: flex;align-items: center;flex-wrap: wrap;white-space: pre-wrap;word-break: break-all;">'+t+"</div>"};c.RongIMClient.setOnReceiveMessageListener({onReceived:function(n){var r=e.getStorageSync("msgTargetId"),s=JSON.stringify(n),l=JSON.parse(s),g=(new Date).getTime();if(0!=r){if(l.senderUserId==r){var i=o(),u=t.$store.state.msgList.length-1;if(u>0){var p=g-t.$store.state.msgList[u].sentTime;if(p>=6e4){var f={messageType:"system",type:"time",content:i};t.$store.commit("pushMsg",f)}}"TextMessage"==l.messageType&&"pin"!=l.content.extra.type&&"system"!=l.content.extra.type&&(l.content.extra=a(l.content.content)),t.$store.commit("pushMsg",l),"ImageMessage"==l.messageType&&t.$store.commit("pushImg",l.content.imageUri),e.setStorageSync("msgList"+r,t.$store.state.msgList),t.$store.commit("changePush",!0),console.log("push成功")}}else{e.getStorageSync("ID");if(l.senderUserId==l.targetId){var d=e.getStorageSync("msgList"+l.targetId);if(d){i=o(),u=d.length-1;if(0!=u){p=g-d[u].sentTime;if(p>=6e4){f={messageType:"system",type:"time",content:i};d.push(f)}}"TextMessage"==l.messageType&&"pin"!=l.content.extra.type&&"system"!=l.content.extra.type&&(l.content.extra=a(l.content.content)),d.push(l),e.setStorageSync("msgList"+l.senderUserId,d)}}if("FileMessage"==l.messageType)for(var m=0;m<t.$store.state.conversation.length;m++)if(t.$store.state.conversation[m].targetId==l.senderUserId){var v=t.$store.state.conversation,y=0;v[m].latestMessage.content.content="[语音]",v[m].unreadMessageCount++;for(var b=0;b<v.length;b++)y+=v[b].unreadMessageCount;if(y=y.toString(),y>0?e.showTabBarRedDot({index:2}):0==y&&e.hideTabBarRedDot({index:2}),t.$store.commit("updateConver",v),e.setStorageSync("conversation",v),t.$store.state.conversation.length>1&&m>0){var h=v[m];v.splice(m,1),v.unshift(h),t.$store.commit("updateConver",v),e.setStorageSync("conversation",v)}console.log("会话更新成功")}}var M=n.content;switch(n.messageType){case c.RongIMClient.MessageType.TextMessage:for(m=0;m<t.$store.state.conversation.length;m++)if(t.$store.state.conversation[m].targetId==n.senderUserId){v=t.$store.state.conversation,y=0;v[m].latestMessage.content.content=M.content,v[m].unreadMessageCount++;for(b=0;b<v.length;b++)y+=v[b].unreadMessageCount;if(y=y.toString(),y>0?e.showTabBarRedDot({index:2}):0==y&&e.hideTabBarRedDot({index:2}),t.$store.commit("updateConver",v),e.setStorageSync("conversation",v),t.$store.state.conversation.length>1&&m>0){h=v[m];v.splice(m,1),v.unshift(h),t.$store.commit("updateConver",v),e.setStorageSync("conversation",v)}console.log("会话更新成功")}break;case c.RongIMClient.MessageType.ImageMessage:console.log("图片缩略图 base64",M.content),console.log("原图 url",M.imageUri);for(m=0;m<t.$store.state.conversation.length;m++)if(t.$store.state.conversation[m].targetId==n.senderUserId){v=t.$store.state.conversation,y=0;v[m].latestMessage.content.content="[图片]",v[m].unreadMessageCount++;for(b=0;b<v.length;b++)y+=v[b].unreadMessageCount;if(y=y.toString(),y>0?e.showTabBarRedDot({index:2}):0==y&&e.hideTabBarRedDot({index:2}),t.$store.commit("updateConver",v),e.setStorageSync("conversation",v),t.$store.state.conversation.length>1&&m>0){h=v[m];v.splice(m,1),v.unshift(h),t.$store.commit("updateConver",v),e.setStorageSync("conversation",v)}console.log("会话更新成功")}break;case c.RongIMClient.MessageType.HQVoiceMessage:console.log("音频 type ",M.type),console.log("音频 url",M.remoteUrl),console.log("音频 时长",M.duration);break;case c.RongIMClient.MessageType.RichContentMessage:console.log("文本内容",M.content),console.log("图片 base64",M.imageUri),console.log("原图 url",M.url);break;case c.RongIMClient.MessageType.UnknownMessage:console.log("未知消息, 请检查消息自定义格式是否正确",n);break;default:console.log("收到消息",n);break}}})};var u=new o.default(g({},r.default,{store:a.default}));t(u).$mount()}).call(this,n("543d")["default"],n("543d")["createApp"])},e4a7:function(e,t,n){},fd85:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o={onLaunch:function(){console.log("App Launch"),wx.setEnableDebug({enableDebug:!0})},onShow:function(){console.log("App Show")},onHide:function(){console.log("App Hide")}};t.default=o}},[["c352","common/runtime","common/vendor"]]]);