{"version":3,"sources":["uni-app:///main.js",null,"webpack:///E:/web前端练习/vue练习/缘拼/pages/message/message.vue?97f1","webpack:///E:/web前端练习/vue练习/缘拼/pages/message/message.vue?f494","webpack:///E:/web前端练习/vue练习/缘拼/pages/message/message.vue?1de5","uni-app:///pages/message/message.vue","webpack:///E:/web前端练习/vue练习/缘拼/pages/message/message.vue?92cf","webpack:///E:/web前端练习/vue练习/缘拼/pages/message/message.vue?7c8e"],"names":["createPage","Page"],"mappings":";;;;;;;;;;kDAAA;AACA;AACA,kG;AACAA,UAAU,CAACC,gBAAD,CAAV,C;;;;;;;;;;;;;ACHA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAoH;AACpH;AAC2D;AACL;AACa;;;AAGnE;AAC2K;AAC3K,gBAAgB,6KAAU;AAC1B,EAAE,6EAAM;AACR,EAAE,kFAAM;AACR,EAAE,2FAAe;AACjB;AACA;AACA;AACA;AACA;AACA,EAAE,sFAAU;AACZ;AACA;;AAEA;AACe,gF;;;;;;;;;;;;ACvBf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACRA;AAAA;AAAA;AAAA;AAA4oB,CAAgB,inBAAG,EAAC,C;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACsChqB,qH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;eACA,EACA,OADA,qBACA,CACA,yBACA,CAHA,EAIA,IAJA,kBAIA,CACA,SACA,QADA,EAEA,QAFA,EAGA,QAHA,EAIA,QAJA,EAKA,qBALA,EAMA,YANA,EAOA,YAPA,EAQA,gBARA,EASA,MATA,EAUA,YAVA,EAWA,sBAXA,EAYA,iBAZA,EAaA,iBAbA,EAcA,gBAdA,EAeA,6BAfA,GAiBA,CAtBA,EAuBA,MAvBA,oBAuBA,CACA;AACA,oBACA,gBACA,0CACA,8CACA,gDACA,cACA,iDADA,EAEA,UACA,mDADA,EAFA,EAKA,cALA,EAMA,QACA,cADA,EANA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAFA,CAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oEADA;AAEA,gCAFA;AAGA;AACA,qFADA,EAHA;;AAMA;AACA,6BADA,EANA;;AASA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAHA,MAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBA/BA;;AAiCA,eAtCA;AAuCA;AACA;AACA,eAzCA;AA0CA,6BA1CA,EA0CA,KA1CA;AA2CA,WAjDA;AAkDA;AACA;AACA,WApDA;AAqDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAfA;;AAiBA;AACA,WAzEA;;AA2EA,OAxFA;;AA0FA,GAxHA;AAyHA,QAzHA,oBAyHA;AACA;AACA;AACA;AACA;AACA;AACA,GA/HA;AAgIA,QAhIA,oBAgIA;AACA;AACA,GAlIA;AAmIA,UAnIA,sBAmIA;AACA;AACA,GArIA;AAsIA;AACA,QADA,kBACA;AACA;AACA;AACA;AACA,mEADA;AAEA,wBAFA;AAGA;AACA,6EADA,EAHA;;AAMA;AACA,uCADA;AAEA,mBAFA,EANA;;AAUA;AACA;AACA;AACA;AACA;AACA,kEADA;;AAGA,aALA,MAKA;AACA;AACA,+BADA;AAEA,4BAFA;AAGA,8BAHA;;AAKA;AACA,WAxBA;;AA0BA;AACA;AACA;AACA;AACA,+BADA;AAEA,wBAFA;AAGA,0BAHA;;AAKA,SANA,MAMA;AACA;AACA;AACA,qEADA;AAEA,0BAFA;AAGA;AACA,iEADA,EAHA;;AAMA;AACA,6BADA;AAEA,mBAFA,EANA;;AAUA;AACA;AACA;AACA;AACA,uLADA;;AAGA,eAJA,MAIA;AACA;AACA,iCADA;AAEA,8BAFA;AAGA,gCAHA;;AAKA;AACA,aAvBA;;AAyBA;AACA;AACA;AACA,KApEA;AAqEA,aArEA,qBAqEA,CArEA,EAqEA;AACA;AACA,KAvEA;AAwEA,mBAxEA,6BAwEA;AACA;AACA;AACA,KA3EA;AA4EA,eA5EA,yBA4EA;AACA;AACA;AACA,KA/EA;AAgFA,aAhFA,uBAgFA;AACA;AACA,KAlFA;AAmFA,cAnFA,sBAmFA,IAnFA,EAmFA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KA/FA;AAgGA,aAhGA,qBAgGA,EAhGA,EAgGA;AACA;AACA;AACA,OAFA,MAEA;AACA;AACA;AACA,KAtGA;AAuGA,aAvGA,uBAuGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAXA;AAYA;AACA;AACA,SAdA;;AAgBA,KA3HA;AA4HA,QA5HA,gBA4HA,EA5HA,EA4HA,KA5HA,EA4HA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SALA;;AAOA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBADA;;AAGA,OAJA,MAIA;AACA;AACA,kBADA;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAHA;AAIA;AACA;AACA,SANA;;AAQA;AACA,iEADA;AAEA,sBAFA;AAGA;AACA,6DADA,EAHA;;AAMA;AACA,yBADA;AAEA,sBAFA,EANA;;AAUA;AACA;AACA;AACA;AACA,kJADA;;AAGA;AACA,SAjBA;;AAmBA,KAtLA,EAtIA,E;;;;;;;;;;;;;ACvCA;AAAA;AAAA;AAAA;AAA+6B,CAAgB,s2BAAG,EAAC,C;;;;;;;;;;;ACAn8B;AACA,OAAO,KAAU,EAAE,kBAKd","file":"pages/message/message.js","sourcesContent":["import 'uni-pages';\nimport Vue from 'vue'\nimport Page from './pages/message/message.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./message.vue?vue&type=template&id=0759e342&\"\nvar renderjs\nimport script from \"./message.vue?vue&type=script&lang=js&\"\nexport * from \"./message.vue?vue&type=script&lang=js&\"\nimport style0 from \"./message.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"web前端练习/vue练习/缘拼/pages/message/message.vue\"\nexport default component.exports","export * from \"-!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--16-0!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=template&id=0759e342&\"","var components\nvar render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--12-1!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view>\r\n\t\t<view class=\"content\" @scroll=\"delStatus\">\r\n\t\t\t<view :class=\"search\">\r\n\t\t\t\t<view :class=\"showStatus==true?'placeholder_hover':'placeholder'\">\r\n\t\t\t\t\t{{search_placeholder}}\r\n\t\t\t\t</view>\r\n\t\t\t\t<input type=\"text\" :value=\"searchContent\" @input=\"searchCon\" @blur=\"searchBarChange\" @focus=\"searchFocus\" class=\"searchBar\"/>\r\n\t\t\t\t<view :class=\"showStatus==true?'searchBtn':'searchBtn_hover'\" @click.native.stop=\"sear\">\r\n\t\t\t\t\t搜索\r\n\t\t\t\t</view>\r\n\t\t\t</view>\r\n\t\t\t<view class=\"text\">\r\n\t\t\t\t<view class=\"human-box\" v-for=\"(conver, index) in conversation\" :key=\"index\" @click=\"talk(conver.targetId, index)\" hover-class=\"human-box-hover\" @longpress=\"deleteCon(conver.targetId)\">\r\n\t\t\t\t\t<view :class=\"deleteId==conver.targetId?'left_del':'left'\">\r\n\t\t\t\t\t\t<image :src=\"conver.img\" mode=\"\" style=\"border-radius: 10upx;width: 100upx;height: 100upx;\"></image>\r\n\t\t\t\t\t\t<view class=\"dot\" v-show=\"conver.unreadMessageCount != 0\">\r\n\t\t\t\t\t\t\t<text style=\"font-size: 18upx;\">{{ conver.unreadMessageCount }}</text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view :class=\"deleteId==conver.targetId?'center_del':'center'\">\r\n\t\t\t\t\t\t<p style=\"font-weight: 550;font-size: 35upx;display: inline-block;\">{{ conver.nickname }}</p>\r\n\t\t\t\t\t\t<p style=\"color: #999999;font-size: 27upx;font-weight: 500;margin-top: 10upx;text-overflow: ellipsis;overflow: hidden;white-space:nowrap; \">{{ conver.latestMessage.content.content }}</p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view :class=\"deleteId==conver.targetId?'right_del':'right'\">\r\n\t\t\t\t\t\t<p style=\"display: inline-block;color: #999999;font-size: 27upx;font-weight: 500;\">{{ conver.sentTime }}</p>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"delete\" @click.native.stop=\"delConver\" v-show=\"deleteId == conver.targetId\">\t\r\n\t\t\t\t\t\t<view :class=\"deleteId == conver.targetId?'one':'one_hide'\"></view>\r\n\t\t\t\t\t\t<view :class=\"deleteId == conver.targetId?'two':'two_hide'\"></view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t</view>\t\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\nimport RongIMLib from '../RongIMLib.miniprogram-1.1.3.js';\r\nexport default {\r\n\tcreated() {\r\n\t\tconsole.log(this.$store);\r\n\t},\r\n\tdata() {\r\n\t\treturn {\r\n\t\t\tval0: '',\r\n\t\t\tval1: '',\r\n\t\t\tval2: '',\r\n\t\t\tval3: '',\r\n\t\t\tplaceholder: '动态占位内容',\r\n\t\t\tnickName: '',\r\n\t\t\tavataUrl: '',\r\n\t\t\tconversation: [],\r\n\t\t\tid: '',\r\n\t\t\tdeleteId:'',\r\n\t\t\tsearchBar:'searchBar',\r\n\t\t\tsearchContent:'',\r\n\t\t\tshowStatus:false,\r\n\t\t\tsearch:'search',\r\n\t\t\tsearch_placeholder:'请输入搜索内容'\r\n\t\t};\r\n\t},\r\n\tonLoad() {\r\n\t\t//融云\r\n\t\tthis.$rongyun();\r\n\t\tvar that = this;\r\n\t\tvar openid = uni.getStorageSync('openId');\r\n\t\tvar nickName = uni.getStorageSync('nickName');\r\n\t\tvar avatarUrl = uni.getStorageSync('avatarUrl');\r\n\t\tuni.request({\r\n\t\t\turl:'https://zmetalhearty.com/yuanpin/Ronglogin',\r\n\t\t\theader: {\r\n\t\t\t    'content-type': 'application/x-www-form-urlencoded'\r\n\t\t\t},\r\n\t\t\tmethod:'POST',\r\n\t\t\tdata:{\r\n\t\t\t\tuserId:openid\r\n\t\t\t},\r\n\t\t\tsuccess: (res) => {\r\n\t\t\t\tconsole.log(res.data);\r\n\t\t\t\tvar token = res.data.token;\r\n\t\t\t\tconsole.log(token);\r\n\t\t\t\tRongIMLib.RongIMClient.connect(token, {\r\n\t\t\t\t  onSuccess: function(userId) {\r\n\t\t\t\t    console.log('连接成功, 用户 id 为', userId);\r\n\t\t\t\t\tuni.setStorageSync('userId',userId);// 连接已成功, 此时可通过 getConversationList 获取会话列表并展示\r\n\t\t\t\t\tvar conversationTypes = [ RongIMLib.ConversationType.PRIVATE ];\r\n\t\t\t\t\tvar count = 150;\r\n\t\t\t\t\tRongIMLib.RongIMClient.getInstance().getConversationList({\r\n\t\t\t\t\t  onSuccess: function(list) {\r\n\t\t\t\t\t    console.log('获取会话列表成功', list);\r\n\t\t\t\t\t\tvar arr = JSON.stringify(list);\r\n\t\t\t\t\t\tconsole.log(arr);\r\n\t\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\t\turl: 'https://zmetalhearty.com/yuanpin/FrontTools',\r\n\t\t\t\t\t\t\tmethod: 'POST',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t    'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tdata: {\r\n\t\t\t\t\t\t\t\tjson:arr\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\t\tconsole.log('上传会话成功');\r\n\t\t\t\t\t\t\t\tvar conversation = res.data;\r\n\t\t\t\t\t\t\t\tconsole.log(conversation);\r\n\t\t\t\t\t\t\t\tfor(var i=0;i<conversation.length;i++) {\r\n\t\t\t\t\t\t\t\t\t// var date = new Date(conversation[i].sentTime);\r\n\t\t\t\t\t\t\t\t\t// var time = date.toLocaleString();\r\n\t\t\t\t\t\t\t\t\tvar time = that.changeTime(conversation[i].sentTime);\r\n\t\t\t\t\t\t\t\t\tconsole.log(time);\r\n\t\t\t\t\t\t\t\t\tconversation[i].sentTime = time;\r\n\t\t\t\t\t\t\t\t\tif(conversation[i].latestMessage.messageType=='ImageMessage') {\r\n\t\t\t\t\t\t\t\t\t\t//conversation[i].latestMessage.content.messageName='图片';\r\n\t\t\t\t\t\t\t\t\t\tconversation[i].latestMessage.content.content = '[图片]';\r\n\t\t\t\t\t\t\t\t\t}else if(conversation[i].latestMessage.messageType=='FileMessage')\r\n\t\t\t\t\t\t\t\t\tconversation[i].latestMessage.content.content = '[语音]'\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tthat.$store.commit('updateConver',conversation);\r\n\t\t\t\t\t\t\t\tconsole.log(that.$store.state.conversation);\r\n\t\t\t\t\t\t\t\tuni.setStorageSync('conversation',conversation);\r\n\t\t\t\t\t\t\t\tthat.conversation = that.$store.state.conversation;\r\n\t\t\t\t\t\t\t\tconsole.log(that.conversation);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t},\r\n\t\t\t\t\t  onError: function(error) {\r\n\t\t\t\t\t    console.log('获取会话列表失败', error);\r\n\t\t\t\t\t  }\r\n\t\t\t\t\t}, conversationTypes, count);\r\n\t\t\t\t  },\r\n\t\t\t\t  onTokenIncorrect: function() {\r\n\t\t\t\t    console.log('连接失败, 失败原因: token 无效');\r\n\t\t\t\t  },\r\n\t\t\t\t  onError: function(errorCode) {\r\n\t\t\t\t    var info = '';\r\n\t\t\t\t    switch (errorCode) {\r\n\t\t\t\t      case RongIMLib.ErrorCode.TIMEOUT:\r\n\t\t\t\t        info = '链接超时';\r\n\t\t\t\t        break;\r\n\t\t\t\t      case RongIMLib.ConnectionState.UNACCEPTABLE_PAROTOCOL_VERSION:\r\n\t\t\t\t        info = '不可接受的协议版本';\r\n\t\t\t\t        break;\r\n\t\t\t\t      case RongIMLib.ConnectionState.IDENTIFIER_REJECTED:\r\n\t\t\t\t        info = 'appkey 不正确';\r\n\t\t\t\t        break;\r\n\t\t\t\t      case RongIMLib.ConnectionState.SERVER_UNAVAILABLE:\r\n\t\t\t\t        info = '服务器不可用';\r\n\t\t\t\t        break;\r\n\t\t\t\t      default:\r\n\t\t\t\t        info = errorCode;\r\n\t\t\t\t        break;\r\n\t\t\t\t    }\r\n\t\t\t\t    console.log('连接失败, 失败原因: ', info);\r\n\t\t\t\t  }\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t})\r\n\t},\r\n\tonShow() {\r\n\t\tuni.setStorageSync('msgTargetId',0);\r\n\t\tconsole.log('onshow');\r\n\t\tvar conversation = uni.getStorageSync('conversation');\r\n\t\tthis.$store.commit('updateConver',conversation);\r\n\t\tthis.conversation = this.$store.state.conversation;\r\n\t},\r\n\tonHide() {\r\n\t\tthis.deleteId = '';\r\n\t},\r\n\tonUnload() {\r\n\t\tthis.deleteId = '';\r\n\t},\r\n\tmethods: {\r\n\t\tsear() {\r\n\t\t\tvar e = this.searchContent;\r\n\t\t\tif(e=='') {\r\n\t\t\t\tuni.request({\r\n\t\t\t\t\turl:'https://zmetalhearty.com/yuanpin/HomeItemsOperator',\r\n\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\theader: {\r\n\t\t\t\t\t    'content-type': 'application/x-www-form-urlencoded;charset=utf-8'\r\n\t\t\t\t\t},\r\n\t\t\t\t\tdata:{\r\n\t\t\t\t\t\toperation:'searchHomeItem',\r\n\t\t\t\t\t\tname:e\r\n\t\t\t\t\t},\r\n\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\tif(res.data.search!=[]) {\r\n\t\t\t\t\t\t\tvar searchArray = JSON.stringify(res.data.search);\r\n\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\turl:'/pages/resault/resault?array='+searchArray\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}else if(res.data.search==[]) {\r\n\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\ttitle:'搜索无结果！',\r\n\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t\tduration:1000\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tif(e!='') {\r\n\t\t\t\tif(isNaN(Number(e))) {\r\n\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\ttitle:'请输入用户名进行搜索',\r\n\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\tduration:1000\r\n\t\t\t\t\t})\r\n\t\t\t\t}else if (typeof (Number(e)) == 'number') {\r\n\t\t\t\t\tvar sourseId = uni.getStorageSync('ID');\r\n\t\t\t\t\tuni.request({\r\n\t\t\t\t\t\turl:'https://zmetalhearty.com/yuanpin/GetUserInfoInRong',\r\n\t\t\t\t\t\tmethod:'POST',\r\n\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t    'content-type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tdata:{\r\n\t\t\t\t\t\t\tFocus:sourseId,\r\n\t\t\t\t\t\t\tID:e\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\t\t\tif(res.data.code==1) {\r\n\t\t\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\t\t\turl:'../info/info?targetName='+res.data.nickname+'&targetId='+res.data.ID+'&avatarUrl='+res.data.img+'&sex='+res.data.sex+'&type='+res.data.status\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}else if(res.data.code==0) {\r\n\t\t\t\t\t\t\t\tuni.showToast({\r\n\t\t\t\t\t\t\t\t\ttitle:'搜索无结果！',\r\n\t\t\t\t\t\t\t\t\ticon:'none',\r\n\t\t\t\t\t\t\t\t\tduration:1000\r\n\t\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t})\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\tthis.searchContent = '';\r\n\t\t},\r\n\t\tsearchCon(e) {\r\n\t\t\tthis.searchContent = e.detail.value;\r\n\t\t},\r\n\t\tsearchBarChange() {\r\n\t\t\tthis.search = 'search';\r\n\t\t\tthis.showStatus = false;\r\n\t\t},\r\n\t\tsearchFocus() {\r\n\t\t\tthis.search = 'search_hover';\r\n\t\t\tthis.showStatus = true;\r\n\t\t},\r\n\t\tdelStatus() {\r\n\t\t\tthis.deleteId = '';\r\n\t\t},\r\n\t\tchangeTime(time) {\r\n\t\t  var date = new Date(time);\r\n\t\t  var m = date.getMonth() + 1;\r\n\t\t  m = m < 10 ? ('0' + m) : m;\r\n\t\t  var d = date.getDate();\r\n\t\t  d = d < 10 ? ('0' + d) : d;\r\n\t\t  var h = date.getHours();\r\n\t\t  h = h < 10 ? ('0' + h) : h;\r\n\t\t  var minute = date.getMinutes();\r\n\t\t  minute = minute < 10 ? ('0' + minute) : minute;\r\n\t\t  // return y + '-' + m + '-' + d + ' ' + h + ':' + minute + ':' + second;//年月日时分秒\r\n\t\t  return m + '-' + d + ' ' + h + ':' + minute;\r\n\t\t},\r\n\t\tdeleteCon(id) {\r\n\t\t\tif(this.deleteId=='') {\r\n\t\t\t\tthis.deleteId = id;\r\n\t\t\t}else {\r\n\t\t\t\tthis.deleteId = '';\r\n\t\t\t}\r\n\t\t},\r\n\t\tdelConver() {\r\n\t\t\tvar that = this;\r\n\t\t\tvar conversationType = RongIMLib.ConversationType.PRIVATE;\r\n\t\t\tvar targetId = this.deleteId;\r\n\t\t\tRongIMLib.RongIMClient.getInstance().removeConversation(conversationType, targetId, {\r\n\t\t\t  onSuccess: function(bool) {\r\n\t\t\t    console.log('删除指定会话成功');\r\n\t\t\t\tvar conver = that.$store.state.conversation;\r\n\t\t\t\tfor(var i=0;i<conver.length;i++) {\r\n\t\t\t\t\tif(conver[i].targetId==targetId) {\r\n\t\t\t\t\t\tconver.splice(i,1);\r\n\t\t\t\t\t\tthat.$store.commit('updateConver',conver);\r\n\t\t\t\t\t\tuni.setStorageSync('conversation',conver);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t  },\r\n\t\t\t  onError: function(error) {\r\n\t\t\t    console.log('删除指定会话失败', error);\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t},\r\n\t\ttalk(id, index) {\r\n\t\t\tthis.showDelete = false;\r\n\t\t\tvar conversationType = RongIMLib.ConversationType.PRIVATE;\r\n\t\t\tvar targetId = id;\r\n\t\t\tvar count = 0;\r\n\t\t\tvar sourseId = uni.getStorageSync('ID');\r\n\t\t\tconsole.log(targetId);\r\n\t\t\tRongIMLib.RongIMClient.getInstance().getConversation(conversationType, targetId, {\r\n\t\t\t\tonSuccess: function(conversation) {\r\n\t\t\t\t\tif (conversation) {\r\n\t\t\t\t\t\tconsole.log('获取指定会话成功', conversation);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\tfor(var u=0;u<this.conversation.length;u++) {\r\n\t\t\t\tcount = count+this.conversation[u].unreadMessageCount;\r\n\t\t\t}\r\n\t\t\tcount = count - this.conversation[index].unreadMessageCount;\r\n\t\t\tcount = count.toString();\r\n\t\t\tif(count>0) {\r\n\t\t\t\tuni.showTabBarRedDot({\r\n\t\t\t\t\tindex:2\r\n\t\t\t\t})\r\n\t\t\t}else if(count==0) {\r\n\t\t\t\tuni.hideTabBarRedDot({\r\n\t\t\t\t\tindex:2\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t\tthis.conversation[index].unreadMessageCount = 0;\r\n\t\t\tuni.setStorageSync('conversation', this.conversation);\r\n\t\t\tvar conversationType = RongIMLib.ConversationType.PRIVATE;\r\n\t\t\tRongIMLib.RongIMClient.getInstance().clearUnreadCount(conversationType, targetId, {\r\n\t\t\t  onSuccess: function() {\r\n\t\t\t    console.log('清除指定会话未读消息数成功');\r\n\t\t\t  },\r\n\t\t\t  onError: function(error) {\r\n\t\t\t    console.log('清除指定会话未读消息数失败', error);\r\n\t\t\t  }\r\n\t\t\t});\r\n\t\t\tuni.request({\r\n\t\t\t\turl:'https://zmetalhearty.com/yuanpin/GetUserInfoInRong',\r\n\t\t\t\tmethod:'POST',\r\n\t\t\t\theader: {\r\n\t\t\t\t    'content-type': 'application/x-www-form-urlencoded'\r\n\t\t\t\t},\r\n\t\t\t\tdata:{\r\n\t\t\t\t\tFocus:sourseId,\r\n\t\t\t\t\tID:targetId\r\n\t\t\t\t},\r\n\t\t\t\tsuccess: (res) => {\r\n\t\t\t\t\tconsole.log(res);\r\n\t\t\t\t\tif(res.data.code==1) {\r\n\t\t\t\t\t\tuni.navigateTo({\r\n\t\t\t\t\t\t\turl:'../HM-chat/HM-chat?avatarUrl='+res.data.img+'&uName='+res.data.nickname+'&targetId='+res.data.ID+'&fromPin='+'0'\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n};\r\n</script>\r\n\r\n<style>\r\n@import url(\"../../static/css/message.css\");\r\n</style>\n","import mod from \"-!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--6-oneOf-1-2!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-3!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../编程软件/HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./message.vue?vue&type=style&index=0&lang=css&\"","// extracted by mini-css-extract-plugin\n    if(module.hot) {\n      // 1592111872505\n      var cssReload = require(\"E:/编程软件/HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/hmr/hotModuleReplacement.js\")(module.id, {\"hmr\":true,\"publicPath\":\"../../\",\"locals\":false});\n      module.hot.dispose(cssReload);\n      module.hot.accept(undefined, cssReload);\n    }\n  "],"sourceRoot":""}